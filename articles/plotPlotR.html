<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="plotPlotR">
<title>plotPlotR • plotPlotR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="plotPlotR">
<meta property="og:description" content="plotPlotR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">plotPlotR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/plotPlotR.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/AgDataNomad/plotPlotR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>plotPlotR</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/AgDataNomad/plotPlotR/blob/HEAD/vignettes/plotPlotR.Rmd" class="external-link"><code>vignettes/plotPlotR.Rmd</code></a></small>
      <div class="d-none name"><code>plotPlotR.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p><code># install.packages("devtools")</code></p>
<p><code>devtools::install_github("AgDataNomad/plotPlotR")</code></p>
</div>
<div class="section level2">
<h2 id="library">Library<a class="anchor" aria-label="anchor" href="#library"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/AgDataNomad/plotPlotR" class="external-link">plotPlotR</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p><strong>plotPlotR</strong> package is developed to provide R users
involved in field experiments to create or manipulate geo-spatial plot
layouts for their experiments. This package is small and has a handful
of functions to perform QGIS like field plot creation and manipulation
which then can be used to extract values from different types of raster
or adding values to plots and create shapefiles etc.</p>
<p>This package is particularly useful for users when working on raster
data generated from Unmanned Aerial Vehicles (drones, UAVs) or if users
want to associate non-spatial data to the plot data.</p>
<p>The core of plotPlotR is the creation of plot segments. If you have
obtained corner points from <a href="https://www.google.com/maps" class="external-link">Google
Maps</a>, <a href="https://earth.google.com/web/" class="external-link">Google Earth</a>, GPS
sensors on farm machine or from a GPS survey tool, then you will be able
to create plots easily using the functions in this package. You can also
assign Run and Range values to your plots which then can then be moved
both vertically and horizontally to account for any discrepancies.</p>
<p>This package provide user friendly functions to deal with field plot
creation and manipulation.</p>
</div>
<div class="section level2">
<h2 id="good-to-know">Good to know<a class="anchor" aria-label="anchor" href="#good-to-know"></a>
</h2>
<p>It is strongly recommended that you use a CRS that are in meters.
Function <code><a href="../reference/read_input_dat.html">read_input_dat()</a></code> is a way users read data for
futher processing using this package. This function will help (enforce)
users to assign and change CRS of the input data. You may choose to use
<a href="https://epsg.io/" class="external-link">epsg.io</a> to find the appropriate CRS for
your region. The examples in this package uses CRS <a href="https://epsg.io/28355" class="external-link">28355</a>, as we are based in
Australia.</p>
<ul>
<li>
<p>Be familiar with the terminology used in this package. People who
are not familiar with field operations may find the terminology used for
arguments in functions new. Please refer to functions help menu or <a href="https://agdatanomad.github.io/plotPlotR/reference/index.html">reference</a>
for more information. Below examples contains some terminology you may
not be familiar with but are used extensively in this package.</p>
<ul>
<li>
<code>Run</code> is plots along tractor runs</li>
<li>
<code>Range</code> is the other axis</li>
<li>
<code>exp_length</code> refers to length of your experiment (length
of Runs)</li>
<li>
<code>exp_width</code> refers to width of your experiment</li>
</ul>
</li>
<li><p>The package doesn’t call user to provide precise direction in
North, South, East, West in most case. This is because, field
experiments are not in aligned to any one direction and some users may
not be able to precisely capture and record that information. Lot of
functions in this package uses relative terms like, up, down, left,
right, top and bottom. We believe this is easier for users to understand
and use. Please refer to the documentation of functions where those
relative terms are used.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="experiment-layout">Experiment layout<a class="anchor" aria-label="anchor" href="#experiment-layout"></a>
</h2>
<p>An experiment layout for the purposes of this package is a
rectangular grid layout, where each smaller rectangles are plots. The
plots can be represented by its position on two axis, <code>Run</code>
and <code>Range</code>. Plots along the direction of the tractor travel
are called <code>Run</code> and plots on the other axis are called
<code>Range</code>.</p>
<p>The experiments themselves has experiment length
<code>exp_length</code> which is akin to the length of a
<code>Run</code> and experiment width <code>exp_width</code> referring
to the length of a <code>Range</code>. <code>exp_length</code> is
measure plot length with gap multiplied by the number of ranges and
<code>exp_width</code> is tractor wheel width multiplied by the number
of runs. Each run has the maximum number of ranges and vice versa.</p>
<p>For several practical reasons, in most cases, experiment length are
typically longer than experiment width but good not to make assumptions.
There may be some cases when your experiment is part of a larger
experiment, you many fewer ranges than runs, in that case your
experiment length might be smaller that experiment width.</p>
<p>Run and Range may not the terminology you use. Rows, Runs, Row, Run,
rowNo, runNo, row_Num, run_NUm are aliases for Runs that we have
encountered. Similarly for Range, column, Column, col etc are used as
alias. It is hard to deal with so many aliases, so try to be consistent
and where needed provide what alias is being used in your
experiment.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_input_dat.html">read_input_dat</a></span><span class="op">(</span><span class="va">cornersData</span>, <span class="fl">4326</span>, <span class="fl">28355</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/corners_to_plots.html">corners_to_plots</a></span><span class="op">(</span>sf_object <span class="op">=</span> <span class="va">dat</span>, <span class="co">#package includes cornersData </span></span>
<span>                 exp_length <span class="op">=</span> <span class="fl">80</span>, <span class="co">#number of ranges multiplied by plot length including gaps</span></span>
<span>                 exp_width <span class="op">=</span> <span class="fl">24.2</span>, <span class="co">#number of runs multiplied by tractor wheel width</span></span>
<span>                 n_runs <span class="op">=</span> <span class="fl">11</span>, <span class="co">#total number of runs</span></span>
<span>                 n_ranges <span class="op">=</span> <span class="fl">20</span><span class="op">)</span> <span class="co">#total number of ranges</span></span>
<span><span class="co">#&gt; [1] "make sure the orientation is correct!!"</span></span>
<span><span class="co">#&gt; Simple feature collection with 220 features and 0 fields</span></span>
<span><span class="co">#&gt; Geometry type: POLYGON</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 654927.526180778 ymin: 6184366.13950962 xmax: 654957.58864967 ymax: 6184447.35525188</span></span>
<span><span class="co">#&gt; Projected CRS: GDA94 / MGA zone 55</span></span>
<span><span class="co">#&gt; First 10 features:</span></span>
<span><span class="co">#&gt;                          geometry</span></span>
<span><span class="co">#&gt; 1  POLYGON ((654933.6804280064...</span></span>
<span><span class="co">#&gt; 2  POLYGON ((654935.8738428378...</span></span>
<span><span class="co">#&gt; 3  POLYGON ((654938.0672576695...</span></span>
<span><span class="co">#&gt; 4  POLYGON ((654940.2606725009...</span></span>
<span><span class="co">#&gt; 5  POLYGON ((654942.4540873323...</span></span>
<span><span class="co">#&gt; 6  POLYGON ((654944.6475021640...</span></span>
<span><span class="co">#&gt; 7  POLYGON ((654946.8409169954...</span></span>
<span><span class="co">#&gt; 8  POLYGON ((654949.0343318269...</span></span>
<span><span class="co">#&gt; 9  POLYGON ((654951.2277466584...</span></span>
<span><span class="co">#&gt; 10 POLYGON ((654953.4211614899...</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="getting-started">Getting started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<div class="section level3">
<h3 id="reading-data">Reading data<a class="anchor" aria-label="anchor" href="#reading-data"></a>
</h3>
<p>The function <code><a href="../reference/read_input_dat.html">read_input_dat()</a></code> is used to bring your
coordinates data into the plotPlotR environment.
<code>read_input_dat</code> allows users to input a csv file path or a
dataframe loaded in the <code>R</code> environment or any common shape
file formats.</p>
<p><em>plotPlotR</em> requires all shapefiles to have a Coordinate
Reference System (CRS) and more importantly it requires coordinates in
unit meters to compute different functions. Coordinate Reference System
is a coordinates based system to locate geographical entities and is the
core principles of GIS workflows. Most common CRS is WGS84 or EPSG 4326,
which uses longitudes and latitudes to locate geographical entities.
This CRS is what gets used in applications such as navigation systems,
google maps, drone navigation etc. Orthomosaics generated using a
stitching software often has CRS 4326.</p>
<p>When reading data from a CSV file or from a dataframe, users need to
supply the X and Y values using <code>XY</code> argument and the CRS
using the <code>input_CRS</code> arg. <code>input_CRS</code> argument
takes any default CRS formats, just entering the EPSG code as a number
works, for example <code>input_CRS = 4326</code>. <code>XY</code>
argument is not required if and when the csv file or the dataframe has
XY as the first two columns.</p>
<p>Here is an example of reading data using the
<strong>cornersData</strong> dataset included in the package.
<code>read_input_dat</code> function is used without declaring
<code>to_CRS_M</code> argument. NOTE: When <code>to_CRS_M</code> is not
supplied, plotPlotR automatically assigns a <strong>WGS 84 /
Pseudo-Mercator</strong> CRS.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_input_dat.html">read_input_dat</a></span><span class="op">(</span>input_dat <span class="op">=</span> <span class="va">cornersData</span>,</span>
<span>                      input_CRS <span class="op">=</span> <span class="fl">4326</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dat</span></span>
<span><span class="co">#&gt; Simple feature collection with 4 features and 1 field</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 16551752.3556914 ymin: -4092173.30932014 xmax: 16551789.4505747 ymax: -4092074.50353949</span></span>
<span><span class="co">#&gt; Projected CRS: WGS 84 / Pseudo-Mercator</span></span>
<span><span class="co">#&gt;   id                       geometry</span></span>
<span><span class="co">#&gt; 1  1 POINT (16551761.36137088015...</span></span>
<span><span class="co">#&gt; 2  4 POINT (16551789.45057468861...</span></span>
<span><span class="co">#&gt; 3  2 POINT (16551752.35569142177...</span></span>
<span><span class="co">#&gt; 4  3 POINT (16551780.27652684040...</span></span></code></pre></div>
<p>Here is an example of reading data with a <code>to_CRS_M</code>
agrument.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_input_dat.html">read_input_dat</a></span><span class="op">(</span>input_dat <span class="op">=</span> <span class="va">cornersData</span>,</span>
<span>                      input_CRS <span class="op">=</span> <span class="fl">4326</span>,</span>
<span>                      to_CRS_M <span class="op">=</span> <span class="fl">28355</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dat</span></span>
<span><span class="co">#&gt; Simple feature collection with 4 features and 1 field</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 654927.929196909 ymin: 6184366.33173315 xmax: 654957.253986111 ymax: 6184447.22484282</span></span>
<span><span class="co">#&gt; Projected CRS: GDA94 / MGA zone 55</span></span>
<span><span class="co">#&gt;   id                       geometry</span></span>
<span><span class="co">#&gt; 1  1 POINT (654934.0432855195831...</span></span>
<span><span class="co">#&gt; 2  4 POINT (654957.2539861107943...</span></span>
<span><span class="co">#&gt; 3  2 POINT (654927.9291969091864...</span></span>
<span><span class="co">#&gt; 4  3 POINT (654951.0031923596980...</span></span></code></pre></div>
<p>An example of reading data from a dataframe</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">cornersData</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span> <span class="co">##dataframe</span></span>
<span><span class="co">#&gt; [1] "data.frame"</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">df_dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_input_dat.html">read_input_dat</a></span><span class="op">(</span>input_dat <span class="op">=</span> <span class="va">dat</span>, input_CRS <span class="op">=</span> <span class="fl">4326</span><span class="op">)</span></span></code></pre></div>
<p>Here is an example of reading input data when the dataframe or the
CSV file doesn’t contain X and Y as the first two columns.
<code>read_input_dat</code> function will convert the XY columns to
<em>geometry</em> and preserves all other columns.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">cornersData</span></span>
<span></span>
<span><span class="co">#rearranging and renaming columns and adding a new column to demonstrate read_input_dat function</span></span>
<span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">dat</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>,<span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>,<span class="st">"B"</span>,<span class="st">"C"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dat</span><span class="op">$</span><span class="va">comment</span> <span class="op">&lt;-</span> <span class="st">"some_gps_data"</span></span>
<span></span>
<span><span class="va">df_dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_input_dat.html">read_input_dat</a></span><span class="op">(</span>input_dat <span class="op">=</span> <span class="va">dat</span>,</span>
<span>                         input_CRS <span class="op">=</span> <span class="fl">4326</span>,</span>
<span>                         XY <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"B"</span>, <span class="st">"C"</span><span class="op">)</span>, <span class="co"># columns names of X and Y coordinates</span></span>
<span>                         to_CRS_M <span class="op">=</span> <span class="fl">28355</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df_dat</span></span>
<span><span class="co">#&gt; Simple feature collection with 4 features and 2 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 654927.929196909 ymin: 6184366.33173315 xmax: 654957.253986111 ymax: 6184447.22484282</span></span>
<span><span class="co">#&gt; Projected CRS: GDA94 / MGA zone 55</span></span>
<span><span class="co">#&gt;   A       comment                       geometry</span></span>
<span><span class="co">#&gt; 1 1 some_gps_data POINT (654934.0432855195831...</span></span>
<span><span class="co">#&gt; 2 4 some_gps_data POINT (654957.2539861107943...</span></span>
<span><span class="co">#&gt; 3 2 some_gps_data POINT (654927.9291969091864...</span></span>
<span><span class="co">#&gt; 4 3 some_gps_data POINT (654951.0031923596980...</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="writing-data">Writing data<a class="anchor" aria-label="anchor" href="#writing-data"></a>
</h3>
<p>Writing outputs of <strong>plotPlotR</strong> is done through calling
<code><a href="../reference/write_output_obj.html">write_output_obj()</a></code> function. This function takes two
arguments; <code>output_dat</code> and <code>file_name</code>. File name
is the file path with the desired extention type. For example
<em>geoJSON</em>, <em>kml</em> etc.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_input_dat.html">read_input_dat</a></span><span class="op">(</span>input_dat <span class="op">=</span> <span class="va">cornersData</span>,</span>
<span>                      input_CRS <span class="op">=</span> <span class="fl">4326</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#write_output_obj(dat, "path_to_folder/file_name.geoJSON")</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="creating-plot-layout">Creating plot layout<a class="anchor" aria-label="anchor" href="#creating-plot-layout"></a>
</h2>
<p>Creating plot layout is the core function of the
<strong>plotPlotR</strong> package and it can be done in one of two ways
depending on what information is available.</p>
<ol style="list-style-type: decimal">
<li>From 4 coordinates or sets of 4 coordinates representing the corners
of the experiment with center of corners being the center of the
experiment. Function<code>corners_to_plots</code> is used to generate
plot layouts from the corner points. The corner points, themselves can
be generated using different ways, if you have a raster you can use the
function <code>collect_corners</code> to get corner points. Users can
also use services such as google earth, QGIS, Ground Control Points data
to get 4 corner points.</li>
<li>From trip points generated from tractors/seeders etc using the
<code>make_plots</code> function. Modern tractors uses GPS or similar
systems to drive on a paddock to sow seeds etc. These trip points, one
for each plot can be used to create a field layout. Variation of make
plots, is splits plots, where two or three varieties are sown in each
plot. Users can use <code>make_split_plots</code> function to generate
split plots from one trip point or from the plot layout generated using
<code>corners_to_plots</code>
</li>
</ol>
<div class="section level3">
<h3 id="corners-to-plots">Corners to plots<a class="anchor" aria-label="anchor" href="#corners-to-plots"></a>
</h3>
<p><code>corners_to_plots</code> uses corners data provided to calculate
the center and the orientation of the experiment. From the exp_length,
exp_width, n_runs, n_ranges arguments a rectangular grid with the
specified number of Runs and Ranges are generated.</p>
<p>Optional <code>exp_orientation</code> sets the orientation of the
experiment, Runs can be aligned North-South (vertically) or East-West
(horizontally) in the rectangular grid. Sizes of plots generated can be
customised using the optional <code>plot_length</code> and
<code>plot_width</code> argument.</p>
<p>NOTE: Orientation of the exp is correlated to experiment length
<code>exp_length</code>, the orientation of the <code>Run</code>, length
of the plots. If the orientation of the experiment is in
<strong>NS</strong>, then the <code>exp_length</code>,
<code>plot_length</code> and the <code>Run</code> are in the same
direction.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_input_dat.html">read_input_dat</a></span><span class="op">(</span>input_dat <span class="op">=</span> <span class="va">cornersData</span>,</span>
<span>                      input_CRS <span class="op">=</span> <span class="fl">4326</span>,</span>
<span>                      to_CRS_M <span class="op">=</span> <span class="fl">28355</span><span class="op">)</span></span>
<span></span>
<span><span class="va">plots_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/corners_to_plots.html">corners_to_plots</a></span><span class="op">(</span>sf_object <span class="op">=</span> <span class="va">dat</span>,</span>
<span>                               exp_length <span class="op">=</span> <span class="fl">80</span>,</span>
<span>                               exp_width <span class="op">=</span> <span class="fl">40</span>,</span>
<span>                               n_runs <span class="op">=</span> <span class="fl">2</span>,</span>
<span>                               n_ranges <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "make sure the orientation is correct!!"</span></span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">plots_data</span><span class="op">)</span></span></code></pre></div>
<p><img src="plotPlotR_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<p>Changing the orientation of the experiment to <strong>EW</strong>
East-West using the optional <code>exp_orientation</code> argument</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">plots_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/corners_to_plots.html">corners_to_plots</a></span><span class="op">(</span>sf_object <span class="op">=</span> <span class="va">dat</span>,</span>
<span>                               exp_length <span class="op">=</span> <span class="fl">80</span>,</span>
<span>                               exp_width <span class="op">=</span> <span class="fl">20</span>,</span>
<span>                               n_runs <span class="op">=</span> <span class="fl">2</span>,</span>
<span>                               n_ranges <span class="op">=</span> <span class="fl">4</span>,</span>
<span>                               exp_orientation <span class="op">=</span> <span class="st">"EW"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">plots_data</span><span class="op">)</span></span></code></pre></div>
<p><img src="plotPlotR_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
<p>Specifying plot length and plot width using the OPTIONAL
<code>plot_length</code> and <code>plot_width</code> argument</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">plots_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/corners_to_plots.html">corners_to_plots</a></span><span class="op">(</span>sf_object <span class="op">=</span> <span class="va">dat</span>,</span>
<span>                               exp_length <span class="op">=</span> <span class="fl">80</span>,</span>
<span>                               exp_width <span class="op">=</span> <span class="fl">40</span>,</span>
<span>                               n_runs <span class="op">=</span> <span class="fl">2</span>,</span>
<span>                               n_ranges <span class="op">=</span> <span class="fl">4</span>,</span>
<span>                               plot_length <span class="op">=</span> <span class="fl">15</span>,</span>
<span>                               plot_width <span class="op">=</span> <span class="fl">8.6</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "make sure the orientation is correct!!"</span></span>
<span><span class="co">#&gt; [1] 355.56577092882281477</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">plots_data</span><span class="op">)</span></span></code></pre></div>
<p><img src="plotPlotR_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="points-to-plots">Points to plots<a class="anchor" aria-label="anchor" href="#points-to-plots"></a>
</h3>
<p>If you have coordinates (points) for each plot in the experiment, say
from a seeder or other device, the function <code><a href="../reference/make_plots.html">make_plots()</a></code>
can be used to create plot layouts of the experiment.
<code>make_plots</code> function takes coordinates as points (a shape
file or an sf object with POINT geometry) as input and using the
<code>plot_length()</code> and <code>plot_width()</code> arguments
generates the plot layout.</p>
<p>In the below example, I am using <code>cornersData</code> as
coordinates of 4 plots. Then using <code><a href="../reference/make_plots.html">make_plots()</a></code> function, I
am generating a plot layout.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">plot_layout</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_plots.html">make_plots</a></span><span class="op">(</span>points_data <span class="op">=</span> <span class="va">dat</span>, </span>
<span>                          plot_length <span class="op">=</span> <span class="fl">75</span>, </span>
<span>                          plot_width <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 355.56577092913175875</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">plot_layout</span><span class="op">)</span></span></code></pre></div>
<p><img src="plotPlotR_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="split-plots">Split plots<a class="anchor" aria-label="anchor" href="#split-plots"></a>
</h3>
<p>Split plots are type of field experiments where more than one
genotype/variety is sown at each plot. <code><a href="../reference/make_split_plots.html">make_split_plots()</a></code>
function allows users to create a split plot layout from plot center
points or from plot layouts generated using
<code>corners_to_plots</code>.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">oneplot</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/corners_to_plots.html">corners_to_plots</a></span><span class="op">(</span><span class="va">dat</span>, </span>
<span>                            exp_length <span class="op">=</span> <span class="fl">80</span>, </span>
<span>                            exp_width <span class="op">=</span> <span class="fl">30</span>, </span>
<span>                            n_runs <span class="op">=</span> <span class="fl">5</span>,</span>
<span>                            n_ranges <span class="op">=</span> <span class="fl">8</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "make sure the orientation is correct!!"</span></span></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">split_plot_layout</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_split_plots.html">make_split_plots</a></span><span class="op">(</span><span class="va">oneplot</span>,</span>
<span>                                      split_dist <span class="op">=</span> <span class="fl">2</span>,</span>
<span>                                      split_into <span class="op">=</span> <span class="fl">2</span>,</span>
<span>                                      plot_length <span class="op">=</span> <span class="fl">7.5</span>,</span>
<span>                                      plot_width <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 355.56577092688229413</span></span></code></pre></div>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">split_plot_layout</span><span class="op">)</span></span></code></pre></div>
<p><img src="plotPlotR_files/figure-html/unnamed-chunk-10-1.png" width="700"></p>
</div>
</div>
<div class="section level2">
<h2 id="plot-manipulation">Plot manipulation<a class="anchor" aria-label="anchor" href="#plot-manipulation"></a>
</h2>
<p><strong>plotPlotR</strong> provides functions to transform
experimental layouts in a few different ways. For easier transformation,
plots needs to be identified by its coordinates, i.e. each plot get
assigned values of Run and Range. Runs and Ranges are a common local
coordinate reference system used in field experiment to identify a plot.
Runs and Ranges are unique to each experiment and has no absolute
reference to the experiment spatially. This simple system however is
quite useful and adequate for people working on field experiments.</p>
<div class="section level3">
<h3 id="adding-run-and-range-values">Adding Run and Range values<a class="anchor" aria-label="anchor" href="#adding-run-and-range-values"></a>
</h3>
<p><code><a href="../reference/addRunRange.html">addRunRange()</a></code> function adds Run and Range values to the
plots in the experiment. For assigning Run and Range values, users need
to provide three pieces of information. The number of Runs using the
<code>n_runs</code> argument, number of Ranges using the
<code>n_ranges</code> argument and the position of the Row 1 and Range 1
using the <code>run1_range1</code> argument. The argument
<code>run1_range1</code> takes one of 4 values from “TR”, “TL”, “BR” and
“BL” which represents top right, top left, bottom right and bottom left
respectively.</p>
<p><em>NOTE: The southern end is the bottom of an experiment in
North-South direction and similarly the eastern end is the bottom of the
experiment in the East-West direction. Assuming someone standing at the
bottom of their experiment looking at the top end, their left side is
the left side of the experiment and similarly their right side is the
right side of the experiment. </em></p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">plots_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/addRunRange.html">addRunRange</a></span><span class="op">(</span><span class="va">plots_data</span>, </span>
<span>                          run1_range1 <span class="op">=</span> <span class="st">"BL"</span>,</span>
<span>                          n_runs <span class="op">=</span> <span class="fl">2</span>,</span>
<span>                          n_ranges <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">plots_data</span><span class="op">)</span></span></code></pre></div>
<p><img src="plotPlotR_files/figure-html/unnamed-chunk-11-1.png" width="700"></p>
<p>Lets explore few transformations</p>
</div>
<div class="section level3">
<h3 id="rotating-the-whole-experiment-layout">Rotating the whole experiment layout<a class="anchor" aria-label="anchor" href="#rotating-the-whole-experiment-layout"></a>
</h3>
<p><code><a href="../reference/rot_plots.html">rot_plots()</a></code> functions takes a sf-object and rotate on
its center by the value provided in the <code>rotation_angle</code>
argument. Users can rotate the whole experiment or just the plots using
the <code>selection</code> option. Rotation angle is declared in degrees
and can be positive or negative value.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">plots_data</span><span class="op">)</span></span></code></pre></div>
<p><img src="plotPlotR_files/figure-html/unnamed-chunk-12-1.png" width="700"></p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">rotated_exp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rot_plots.html">rot_plots</a></span><span class="op">(</span>sf_object <span class="op">=</span> <span class="va">plots_data</span>, rotation_angle <span class="op">=</span> <span class="fl">90</span>, selection <span class="op">=</span> <span class="st">"experiment"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">rotated_exp</span><span class="op">)</span></span></code></pre></div>
<p><img src="plotPlotR_files/figure-html/unnamed-chunk-12-2.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="rotating-individual-plots">Rotating individual plots<a class="anchor" aria-label="anchor" href="#rotating-individual-plots"></a>
</h3>
<p>Rotating individual plots is similar to rotating the entire
experiment, only difference being the orientation of the experiment will
be the same and individuals plots were rotated on its axis.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">plots_data</span><span class="op">)</span></span></code></pre></div>
<p><img src="plotPlotR_files/figure-html/unnamed-chunk-13-1.png" width="700"></p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">rotated_plots</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rot_plots.html">rot_plots</a></span><span class="op">(</span>sf_object <span class="op">=</span> <span class="va">plots_data</span>, rotation_angle <span class="op">=</span> <span class="op">-</span><span class="fl">10</span>, selection <span class="op">=</span> <span class="st">"plots"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">rotated_plots</span><span class="op">)</span></span></code></pre></div>
<p><img src="plotPlotR_files/figure-html/unnamed-chunk-13-2.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="plot-displacement">Plot displacement<a class="anchor" aria-label="anchor" href="#plot-displacement"></a>
</h3>
<p>Plots (or experiments as a whole) can be moved horizontally,
vertically, along its run or range or along the compass direction in a
number of ways using functions in <strong>plotPlotR</strong>.</p>
<p>Moving runs can be done using the <code><a href="../reference/movePlotRuns.html">movePlotRuns()</a></code>
function. Movement of plots are done through two arguments,
<code>moveDirection</code> and <code>moveDistane</code>.
<code>moveDirection</code> takes “left”, “right”, “up” or “down” and
<code>moveDistance</code> takes a distance value in meters. There is a
optional argument <code>runSelection</code>, which when not supplied
applies the movement to all plots.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">moved_run</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/movePlotRuns.html">movePlotRuns</a></span><span class="op">(</span><span class="va">plots_data</span>, moveDirection <span class="op">=</span> <span class="st">"up"</span>, moveDistance <span class="op">=</span> <span class="fl">5</span>, runSelection <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">moved_run</span><span class="op">)</span></span></code></pre></div>
<p><img src="plotPlotR_files/figure-html/unnamed-chunk-14-1.png" width="700"></p>
<p>Similarly plots can be moved range wise. By default when
<code>rangeSelection</code> is not supplied, all Ranges are moved.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">moved_range</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/movePlotRanges.html">movePlotRanges</a></span><span class="op">(</span><span class="va">plots_data</span>, moveDirection <span class="op">=</span> <span class="st">"right"</span>, moveDistance <span class="op">=</span> <span class="fl">5</span>, rangeSelection <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">moved_range</span><span class="op">)</span></span></code></pre></div>
<p><img src="plotPlotR_files/figure-html/unnamed-chunk-15-1.png" width="700"></p>
<p>Entire experimental layout can be moved north, south, west or east
direction using the <code><a href="../reference/moveAllPlots.html">moveAllPlots()</a></code> function through
supplying distance to move horizontally and vertically.
<code>xy_move</code> is a vector of length two, first element is the
distance to move in X direction and the second element being the Y
direction.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="../reference/moveAllPlots.html">moveAllPlots</a></span><span class="op">(</span><span class="va">plots_data</span>, xy_move <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">4</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Simple feature collection with 8 features and 2 fields</span></span>
<span><span class="co">#&gt; Geometry type: POLYGON</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 654927.400918932 ymin: 6184372.25402825 xmax: 654961.713911517 ymax: 6184449.24073325</span></span>
<span><span class="co">#&gt; Projected CRS: GDA94 / MGA zone 55</span></span>
<span><span class="co">#&gt;   Run Range                       geometry</span></span>
<span><span class="co">#&gt; 1   1     1 POLYGON ((654933.1995187080...</span></span>
<span><span class="co">#&gt; 2   2     1 POLYGON ((654953.1396535396...</span></span>
<span><span class="co">#&gt; 3   1     2 POLYGON ((654931.6532254343...</span></span>
<span><span class="co">#&gt; 4   2     2 POLYGON ((654951.5933602662...</span></span>
<span><span class="co">#&gt; 5   1     3 POLYGON ((654930.1069321610...</span></span>
<span><span class="co">#&gt; 6   2     3 POLYGON ((654950.0470669928...</span></span>
<span><span class="co">#&gt; 7   1     4 POLYGON ((654928.5606388874...</span></span>
<span><span class="co">#&gt; 8   2     4 POLYGON ((654948.5007737195...</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Aswin Singaram Natarajan, Todd Collins.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
